<div class="container">
  <mat-card-title class="mainTitle">Historia Wiadomości</mat-card-title>

  <mat-form-field class="searchInput">
    <mat-label>Wyszukaj wiadomość w historii</mat-label>
    <input matInput placeholder="Dane klientki lub numer" [formControl]="searchCtrl">
  </mat-form-field>

  <mat-spinner *ngIf="isLoading$|async"></mat-spinner>
  <ng-container *ngIf="(messages$|async) as messages">

    <mat-action-list class="messages">

      <div class="message" *ngFor="let message of messages.items">
<!--
        <button mat-icon-button class="editBtn" (click)="initChat(message)">
          <mat-icon class="active">chat</mat-icon>
        </button> -->

        <button class="name" mat-list-item (click)="select(message)">
          {{message.name}} - ({{message.customer.name}} {{message.customer.surname}} / {{message.customer.phone}})
          <span class="date">{{message.created_at|date}}</span>
        </button>
      </div>

    </mat-action-list>

    <mat-paginator
      [length]="pagination.length"
      [pageSize]="pagination.pageSize"
      [pageSizeOptions]="[2, 5, 10]"
      [pageIndex]="pagination.pageIndex"
      (page)="changePage($event)">
    </mat-paginator>
  </ng-container>
</div>

<button mat-raised-button color="primary" class="addBtn" (click)="initChat()">Wyślij wiadomość</button>

<ng-template #empty>
  <mat-spinner ></mat-spinner>
</ng-template>
